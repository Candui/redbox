# redbox
–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é —Å—Ç–∞–∂–µ—Ä DevOps
# DockerCompose
üîπ db ‚Äî PostgreSQL

image: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ PostgreSQL 15.

environment: –∑–∞–¥–∞—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ë–î:
POSTGRES_USER: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
POSTGRES_PASSWORD: –ø–∞—Ä–æ–ª—å.
POSTGRES_DB: –∏–º—è —Å–æ–∑–¥–∞–≤–∞–µ–º–æ–π –±–∞–∑—ã.

volumes: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–æ–º–µ pgdata, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Ç–µ—Ä—è–ª–∏—Å—å –ø—Ä–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

ports: –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç 5432 –Ω–∞ —Ö–æ—Å—Ç –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î.


üîπ redis ‚Äî Redis

image: –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Redis –≤–µ—Ä—Å–∏–∏ 7.

ports: –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç Redis –Ω–∞—Ä—É–∂—É –Ω–∞ 6379.


üîπ php ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π PHP-—Å–µ—Ä–≤–∏—Å

context: –ø—É—Ç—å –¥–æ –∫–∞—Ç–∞–ª–æ–≥–∞, —Å–æ–¥–µ—Ä–∂–∞—â–µ–≥–æ Dockerfile (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ ./php).

dockerfile: –∏–º—è Dockerfile.

environment: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Redis –∏ PostgreSQL.

volumes: –º–æ–Ω—Ç–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É php –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ –ø—É—Ç–∏ /var/www/html.

depends_on: —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å–Ω–∞—á–∞–ª–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã db –∏ redis.


üîπ nginx ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Äyaml

image: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–µ–∂–∏–π –æ–±—Ä–∞–∑ Nginx.

ports: –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç 80 –Ω–∞ —Ö–æ—Å—Ç (–¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ http://localhost).

volumes:

–ú–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª nginx –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
–ú–æ–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–¥ –∏–∑ php, —á—Ç–æ–±—ã nginx –∏–º–µ–ª –¥–æ—Å—Ç—É–ø –∫ PHP-—Å–∫—Ä–∏–ø—Ç–∞–º.

depends_on: –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ php.



üîπ volumes

volumes:
  pgdata:

–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–º pgdata, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö PostgreSQL (/var/lib/postgresql/data).

–≠—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏.